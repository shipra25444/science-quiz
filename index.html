<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Science Quiz Game</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Intro Screen -->
  <div id="intro">
    <h1>Welcome Science Masters!</h1>
    <button id="levelSelectBtn">Choose Level</button>
  </div>

  <!-- Level Selection Screen -->
  <div id="levelSelect">
    <h1>Science Quiz</h1>
    <h2>Select a Level</h2>
    <button class="navBtn" onclick="startQuiz(0)">Easy</button>
    <button class="navBtn" onclick="startQuiz(1)">Medium</button>
    <button class="navBtn" onclick="startQuiz(2)">Hard</button>
    <button class="navBtn" onclick="startQuiz(3)">Extreme</button>
  </div>

  <!-- Level Complete Screen -->
  <div id="levelComplete">
    <p>✅ Level Completed!</p>
    <button class="navBtn" id="nextLevelBtn">Next Level</button>
    <button class="navBtn" onclick="window.location.reload()">Exit to Home</button>
  </div>

  <!-- Game Over Screen -->
  <div id="gameOver">🛑 Game Over! Time's up.</div>

  <!-- UI Components -->
  <div id="shop-container">💡 Bulbs: <span id="bulbCount">0</span></div>
  <div id="timer">15</div>
  <div id="streakDisplay">Streak: 0</div>

  <!-- Quiz Container -->
  <div id="quiz">
    <div id="scoreDisplay">Score: 0</div>
    <div class="question" id="questionText"></div>
    <div id="options"></div>
    <button id="submit">Submit</button>
    <div id="feedback"></div>
  </div>

  <!-- Abilities -->
  <div id="abilities">
    <button class="ability" id="fiftyBtn">50:50 (10)</button>
    <button class="ability" id="hintBtn">Hint (15)</button>
    <button class="ability" id="skipBtn">🚌 Skip (35)</button>
  </div>

  <!-- Script -->
  <script>
    const questionText = document.getElementById("questionText");
    const optionsEl = document.getElementById("options");
    const submitBtn = document.getElementById("submit");
    const feedback = document.getElementById("feedback");
    const scoreDisplay = document.getElementById("scoreDisplay");
    const bulbCountEl = document.getElementById("bulbCount");
    const timerEl = document.getElementById("timer");
    const streakDisplay = document.getElementById("streakDisplay");
    const gameOver = document.getElementById("gameOver");
    const intro = document.getElementById("intro");
    const quiz = document.getElementById("quiz");
    const shopDiv = document.getElementById("shop-container");
    const hintBtn = document.getElementById("hintBtn");
    const fiftyBtn = document.getElementById("fiftyBtn");
    const skipBtn = document.getElementById("skipBtn");
    const levelSelect = document.getElementById("levelSelect");
    const levelComplete = document.getElementById("levelComplete");

    let lvl = 0, qIdx = 0, selected = null, score = 0, bulbs = 0, streak = 0;
    let timer;

    const allLevelsPool = [
      {
        level: "Easy",
        questions: [
          { q: "What planet is known as the Red Planet?", o: ["Earth", "Mars", "Venus", "Jupiter"], a: "Mars" },
          { q: "How many legs does an insect have?", o: ["4", "6", "8", "10"], a: "6" },
          { q: "Which gas do plants absorb?", o: ["Oxygen", "Carbon Dioxide", "Nitrogen", "Helium"], a: "Carbon Dioxide" },
          { q: "What is the boiling point of water?", o: ["50°C", "100°C", "150°C", "200°C"], a: "100°C" },
          { q: "What part of the cell contains DNA?", o: ["Cytoplasm", "Membrane", "Nucleus", "Ribosome"], a: "Nucleus" }
        ]
      },
      {
        level: "Medium",
        questions: [
          { q: "What is the chemical formula for water?", o: ["O2", "H2O", "CO2", "NaCl"], a: "H2O" },
          { q: "What part of the plant absorbs water?", o: ["Stem", "Leaves", "Flowers", "Roots"], a: "Roots" },
          { q: "What kind of animal is a frog?", o: ["Mammal", "Bird", "Reptile", "Amphibian"], a: "Amphibian" },
          { q: "What is the largest planet?", o: ["Earth", "Mars", "Jupiter", "Saturn"], a: "Jupiter" },
          { q: "What process do plants use to make food?", o: ["Digestion", "Respiration", "Photosynthesis", "Fermentation"], a: "Photosynthesis" }
        ]
      },
      {
        level: "Hard",
        questions: [
          { q: "Which metal is liquid at room temperature?", o: ["Gold", "Iron", "Mercury", "Copper"], a: "Mercury" },
          { q: "What causes tides in the ocean?", o: ["Wind", "Rain", "Moon’s gravity", "Earthquakes"], a: "Moon’s gravity" },
          { q: "What is the smallest unit of life?", o: ["Atom", "Molecule", "Cell", "Tissue"], a: "Cell" },
          { q: "What’s the main gas in Earth’s atmosphere?", o: ["Oxygen", "Carbon Dioxide", "Hydrogen", "Nitrogen"], a: "Nitrogen" },
          { q: "How many bones are in the adult human body?", o: ["106", "206", "306", "406"], a: "206" }
        ]
      },
      {
        level: "Extreme",
        questions: [
          { q: "What natural satellite orbits Earth?", o: ["Sun", "Mars", "Moon", "Venus"], a: "Moon" },
          { q: "What gas do cars emit?", o: ["Oxygen", "Hydrogen", "Carbon Dioxide", "Helium"], a: "Carbon Dioxide" },
          { q: "How many planets are in the Solar System?", o: ["7", "8", "9", "10"], a: "8" },
          { q: "What state of matter is air?", o: ["Solid", "Liquid", "Gas", "Plasma"], a: "Gas" },
          { q: "What is the primary source of energy for Earth?", o: ["Moon", "Volcanoes", "Sun", "Electricity"], a: "Sun" }
        ]
      }
    ];

    document.getElementById("levelSelectBtn").onclick = () => {
      intro.style.display = 'none';
      levelSelect.style.display = 'flex';
    };

    function startQuiz(levelIndex) {
      lvl = levelIndex;
      qIdx = 0;
      score = 0;
      bulbs = 0;
      streak = 0;
      levelSelect.style.display = 'none';
      quiz.style.display = 'block';
      shopDiv.style.display = 'block';
      timerEl.style.display = 'block';
      streakDisplay.style.display = 'block';
      updateDisplay();
      showQuestion();
    }

    function startTimer() {
      let timeLeft = 15;
      timerEl.textContent = timeLeft;
      timer = setInterval(() => {
        timeLeft--;
        timerEl.textContent = timeLeft;
        if (timeLeft <= 0) {
          clearInterval(timer);
          quiz.style.display = 'none';
          gameOver.style.display = 'flex';
        }
      }, 1000);
    }

    function resetTimer() {
      clearInterval(timer);
      startTimer();
    }

    function updateDisplay() {
      scoreDisplay.textContent = `Score: ${score}`;
      bulbCountEl.textContent = bulbs;
      streakDisplay.textContent = `Streak: ${streak}`;
    }

    function showQuestion() {
      const pool = allLevelsPool[lvl];
      const current = pool.questions[qIdx];

      questionText.textContent = current.q;
      optionsEl.innerHTML = "";
      feedback.textContent = "";
      selected = null;
      submitBtn.style.display = "none";

      current.o.forEach(opt => {
        const div = document.createElement("div");
        div.textContent = opt;
        div.className = "option";
        div.onclick = () => {
          selected = opt;
          Array.from(optionsEl.children).forEach(c => c.style.background = "#e0e0e0");
          div.style.background = "#90ee90";
          submitBtn.style.display = "block";
        };
        optionsEl.appendChild(div);
      });
      resetTimer();
    }

    submitBtn.onclick = () => {
      clearInterval(timer);
      const correct = allLevelsPool[lvl].questions[qIdx].a;
      if (selected === correct) {
        feedback.textContent = "✅ Correct!";
        score += 10;
        bulbs += 5;
        streak++;
      } else {
        feedback.textContent = `❌ Wrong! Answer: ${correct}`;
        streak = 0;
      }
      updateDisplay();
      qIdx++;
      if (qIdx >= allLevelsPool[lvl].questions.length) {
        if (lvl + 1 < allLevelsPool.length) {
          quiz.style.display = 'none';
          levelComplete.style.display = 'flex';
          document.getElementById("nextLevelBtn").onclick = () => {
            lvl++;
            qIdx = 0;
            levelComplete.style.display = 'none';
            quiz.style.display = 'block';
            updateDisplay();
            showQuestion();
          };
          return;
        } else {
          feedback.textContent += " 🎉 Quiz Complete!";
          return;
        }
      }
      setTimeout(showQuestion, 1500);
    };

    hintBtn.onclick = () => {
      if (bulbs >= 15) {
        bulbs -= 15;
        const correct = allLevelsPool[lvl].questions[qIdx].a;
        Array.from(optionsEl.children).forEach(opt => {
          if (opt.textContent === correct) {
            opt.style.background = '#ffff99';
          }
        });
        updateDisplay();
      }
    };

    fiftyBtn.onclick = () => {
      if (bulbs >= 10) {
        bulbs -= 10;
        const correct = allLevelsPool[lvl].questions[qIdx].a;
        let removed = 0;
        Array.from(optionsEl.children).forEach(opt => {
          if (opt.textContent !== correct && removed < 2) {
            opt.style.visibility = 'hidden';
            removed++;
          }
        });
        updateDisplay();
      }
    };

    skipBtn.onclick = () => {
      if (bulbs >= 40) {
        bulbs -= 40;
        qIdx++;
        if (qIdx >= allLevelsPool[lvl].questions.length) {
          lvl++;
          qIdx = 0;
          if (lvl >= allLevelsPool.length) {
            feedback.textContent = "🎉 Quiz Complete!";
            return;
          }
        }
        updateDisplay();
        showQuestion();
      }
    };
  </script>
</body>
</html>
