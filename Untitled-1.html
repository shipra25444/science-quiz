<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8"><title>Science Quiz – All Features</title>
<style>
  body,html{margin:0;padding:0;font-family:Arial,sans-serif;background:#f7f7f7;color:#333;}
  #intro{position:fixed;inset:0;background:#28a;color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;animation:fadeIn 1s;}
  @keyframes fadeIn{from{opacity:0;}to{opacity:1}}
  #shop-icon{position:fixed;top:10px;left:10px;width:30px;height:30px;cursor:pointer;z-index:10;}
  #shop-icon span{display:block;height:4px;background:#fff;margin:5px 0;}
  #abilities{display:none;position:fixed;top:50px;left:10px;background:#ffeb3b;padding:10px;width:180px;border-radius:6px;z-index:9;}
  #abilities button{width:100%;padding:6px;margin:4px 0;background:#333;color:#fff;border:none;border-radius:4px;cursor:pointer;}
  #timer,#shop-container,#quiz{display:none;}
  #timer{position:fixed;top:10px;right:10px;background:#eee;padding:8px;border-radius:4px;font-size:1.1em;z-index:8;}
  #shop-container{position:fixed;top:10px;left:50px;background:#ffeb3b;padding:10px;border-radius:4px;font-size:0.9em;z-index:8;}
  #quiz{position:relative;margin:120px auto;max-width:600px;background:#fff;padding:2rem;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,0.1);}
  .score{position:absolute;top:10px;right:20px;font-size:1.2em;}
  .question{font-size:1.2em;margin-bottom:1rem;}
  .option{margin:0.5rem 0;padding:0.5rem;border:1px solid #ccc;border-radius:4px;cursor:pointer;text-align:left;}
  .option:hover{background:#efefef;}
  #submit{display:none;margin-top:1rem;padding:0.7rem 1.5rem;background:#28a;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer;}
  #feedback{margin-top:1rem;min-height:2em;color:#d00;}
</style>
</head>
<body>
<div id="intro"><h1>Welcome to Science Quiz!</h1><button id="startBtn">Start Quiz</button></div>
<div id="shop-icon"><span></span><span></span><span></span></div>
<div id="abilities">
  <strong>Abilities (bulbs):</strong>
  <button id="buy5050">Buy 50:50 (2 bulbs)</button>
  <button id="buySkip">Buy Skip (3 bulbs)</button>
  <button id="buyHint">Buy Hint (1 bulb)</button>
  <button id="buySwap">Buy Swap (5 bulbs)</button>
  <button id="buyBonus">Buy Bonus Bulb (3 bulbs)</button>
</div>
<div id="timer">30:00</div>
<div id="shop-container">Bulbs: <span id="bulbCount">0</span></div>
<div id="quiz">
  <div class="score" id="scoreDisplay">Score: 0</div>
  <div class="question" id="question"></div>
  <div id="options"></div>
  <button id="submit">Submit</button>
  <div id="feedback"></div>
</div>

<script>
// FULL QUESTION SET
const allLevelsPool = [
  {name:'Easy', questions:[
    {q:'What planet is the Red Planet?', options:['Mars','Venus','Earth','Saturn'], a:'Mars'},
    {q:'Process plants use to make food?', options:['Photosynthesis','Respiration','Fermentation','Digestion'], a:'Photosynthesis'},
    {q:'Most abundant gas in air?', options:['Oxygen','Nitrogen','CO₂','Hydrogen'], a:'Nitrogen'},
    {q:'Smallest unit of life?', options:['Atom','Cell','Molecule','Organ'], a:'Cell'},
    {q:'Chemical symbol for water?', options:['H₂O','NaCl','CO₂','O₂'], a:'H₂O'},
    {q:'How many bones in an adult human?', options:['206','208','200','210'], a:'206'},
    {q:'Hardest natural substance?', options:['Gold','Iron','Diamond','Quartz'], a:'Diamond'},
    {q:'Bees collect from flowers?', options:['Water','Pollen','Nectar','Honey'], a:'Nectar'},
    {q:'Sunlight produces which vitamin?', options:['A','B','C','D'], a:'D'},
    {q:'Center of an atom is called?', options:['Electron','Proton','Nucleus','Neutron'], a:'Nucleus'}
  ]},
  {name:'Medium', questions:[
    {q:'Pigment giving plants green color?', options:['Chlorophyll','Carotene','Melanin','Xanthophyll'], a:'Chlorophyll'},
    {q:'Force causing tides?', options:['Wind','Gravity','Magnetism','Sunlight'], a:'Gravity'},
    {q:'Type of bond that shares electrons?', options:['Ionic','Covalent','Polar','Metallic'], a:'Covalent'},
    {q:'Study of fungi is called?', options:['Botany','Mycology','Zoology','Geology'], a:'Mycology'},
    {q:'Chemical symbol for sodium?', options:['Na','S','Sn','Sa'], a:'Na'},
    {q:'Liquid to gas process?', options:['Evaporation','Condensation','Sublimation','Freezing'], a:'Evaporation'},
    {q:'Enzyme breaking lactose?', options:['Lactase','Lipase','Amylase','Protease'], a:'Lactase'},
    {q:'Atmospheric layer boundary?', options:['Troposphere','Stratosphere','Mesopause','Tropopause'], a:'Tropopause'},
    {q:'Organism making its own food?', options:['Producer','Consumer','Omnivore','Decomposer'], a:'Producer'},
    {q:'Boiling point of water (°C)?', options:['90','80','100','120'], a:'100'}
  ]},
  {name:'Hard', questions:[
    {q:'Solid to gas skipping liquid?', options:['Evaporation','Condensation','Sublimation','Deposition'], a:'Sublimation'},
    {q:'Ionization energy is?', options:['Energy to remove electron','Binding energy','Thermal energy','Activation energy'], a:'Energy to remove electron'},
    {q:'Light bending around mass objects?', options:['Reflection','Refraction','Diffraction','Gravitational lensing'], a:'Gravitational lensing'},
    {q:'Which law says entropy never decreases?', options:['First','Second','Third','Zeroth'], a:'Second'},
    {q:'Study of heat energy is called?', options:['Optics','Thermodynamics','Quantum','Dynamics'], a:'Thermodynamics'},
    {q:'Laughing gas chemical formula?', options:['NO','CO₂','N₂O','O₃'], a:'N₂O'},
    {q:'Father of modern physics?', options:['Newton','Einstein','Darwin','Pasteur'], a:'Einstein'},
    {q:'Gas to solid transition?', options:['Evaporation','Condensation','Sublimation','Deposition'], a:'Deposition'},
    {q:'Hardest natural material?', options:['Diamond','Corundum','Quartz','Topaz'], a:'Diamond'},
    {q:'“Entropy” refers to?', options:['Conservation','Entropy','Mass','Momentum'], a:'Entropy'}
  ]},
  {name:'Extreme', questions:[
    {q:'Rarest human blood type?', options:['A+','O+','AB−','B−'], a:'AB−'},
    {q:'How many senses do humans have?', options:['5','7','9','11'], a:'9'},
    {q:'Mountain furthest from Earth’s center?', options:['Everest','K2','Chimborazo','Kilimanjaro'], a:'Chimborazo'},
    {q:'Hottest planet?', options:['Mercury','Venus','Mars','Jupiter'], a:'Venus'},
    {q:'Deadliest animal on Earth?', options:['Mosquito','Shark','Snake','Hippo'], a:'Mosquito'},
    {q:'Red blood cell lifespan?', options:['90d','100d','120d','150d'], a:'120d'},
    {q:'Longest cell in the human body?', options:['Skin cell','Red blood cell','Nerve cell','Muscle cell'], a:'Nerve cell'},
    {q:'Where is your pinna located?', options:['Nose','Ear','Hand','Foot'], a:'Ear'},
    {q:'Small mammal that lays eggs?', options:['Kangaroo','Platypus','Koala','Wombat'], a:'Platypus'},
    {q:'Only bear in Southern Hemisphere?', options:['Polar','Spectacled','Brown','Panda'], a:'Spectacled bear'}
  ]}
];

const levels = JSON.parse(JSON.stringify(allLevelsPool));
let lvl=0, qIdx=0, selected=null, score=0, bulbs=0;
let abilities={5050:0,skip:0,hint:0,swap:0,bonus:0};
let timeLeft=30*60, freezeRemain=0, timerInt=null;

const intro=document.getElementById('intro'),
      startBtn=document.getElementById('startBtn'),
      shopIcon=document.getElementById('shop-icon'),
      abilitiesDiv=document.getElementById('abilities'),
      timerDiv=document.getElementById('timer'),
      shopDiv=document.getElementById('shop-container'),
      quiz=document.getElementById('quiz'),
      bulbCountEl=document.getElementById('bulbCount'),
      scoreDisplay=document.getElementById('scoreDisplay'),
      questionEl=document.getElementById('question'),
      optionsEl=document.getElementById('options'),
      submitBtn=document.getElementById('submit'),
      feedback=document.getElementById('feedback');

shopIcon.onclick = ()=>abilitiesDiv.style.display = abilitiesDiv.style.display==='block' ? 'none' : 'block';

['5050','Skip','Hint','Swap','Bonus'].forEach(id=>{
  document.getElementById('buy'+id).onclick = ()=>{
    buy(id.toLowerCase(),{5050:2,skip:3,hint:1,swap:5,bonus:3}[id.toLowerCase()]);
  };
});

function buy(id,cost){
  if(bulbs>=cost){
    bulbs-=cost;
    abilities[id]++;
    feedback.style.color='#000';
    feedback.textContent=`Bought ${id}`;
    updateDisplay();
    renderOptions(levels[lvl].questions[qIdx]);
  } else {
    feedback.style.color='#d00';
    feedback.textContent='Not enough bulbs';
  }
}

startBtn.onclick=()=>{
  intro.style.display='none';
  quiz.style.display='block';
  shopDiv.style.display='block';
  timerDiv.style.display='block';
  showQuestion();
  startTimer();
};

function startTimer(){
  updateTimer();
  timerInt=setInterval(()=>{
    if(freezeRemain>0){freezeRemain--;return;}
    timeLeft--;
    if(timeLeft<=0){clearInterval(timerInt);timerDiv.textContent='Time Up!';endQuiz();}
    else updateTimer();
  },1000);
}

function updateTimer(){
  let m=Math.floor(timeLeft/60), s=timeLeft%60;
  timerDiv.textContent = `${m<10?'0'+m:m}:${s<10?'0'+s:s}`;
}

function updateDisplay(){
  scoreDisplay.textContent=`Score: ${score}`;
  bulbCountEl.textContent=bulbs;
}

function renderOptions(q){
  optionsEl.innerHTML='';
  selected=null;
  submitBtn.style.display='none';
  q.options.forEach(opt=>{
    const d=document.createElement('div');
    d.className='option';
    d.textContent=opt;
    d.onclick=()=>{
      selected=opt;
      Array.from(optionsEl.children).forEach(c=>c.style.background='');
      d.style.background='#d0eaff';
      feedback.textContent='';
      submitBtn.style.display='block';
    };
    optionsEl.appendChild(d);
  });
  for(let ab of ['5050','skip','swap','hint','bonus']){
    if(abilities[ab]>0){
      const btn=document.createElement('button');
      btn.textContent=`Use ${ab}`;
      btn.onclick=()=>useAbility(ab);
      optionsEl.appendChild(btn);
    }
  }
}

function useAbility(id){
  abilities[id]--;
  updateDisplay();
  feedback.style.color='#000';
  feedback.textContent=`Used ${id}`;
  const q=levels[lvl].questions[qIdx];
  if(id==='5050'){
    const wrong=q.options.filter(o=>o!==q.a).sort(()=>0.5-Math.random()).slice(0,2);
    Array.from(optionsEl.children).forEach(div=>{
      if(div.className==='option'&&wrong.includes(div.textContent))
        div.style.visibility='hidden';
    });
  } else if(id==='skip'){
    nextQuestion();
  } else if(id==='swap'){
    levels[lvl].questions.splice(qIdx,1);
    const pool=allLevelsPool[lvl].filter(item=>!levels[lvl].questions.includes(item));
    const rep=pool[Math.floor(Math.random()*pool.length)];
    levels[lvl].questions.splice(qIdx,0,rep);
    showQuestion();
  } else if(id==='hint'){
    feedback.textContent=`Hint: starts with "${q.a[0]}"`;
  } else if(id==='bonus'){
    bulbs+=2;
    feedback.textContent='Bonus +2 bulbs';
    updateDisplay();
  }
}

function showQuestion(){
  feedback.style.color='#d00';
  feedback.textContent='';
  submitBtn.style.display='none';
  const cur=levels[lvl].questions[qIdx];
  questionEl.textContent=`(${levels[lvl].name}) Q${qIdx+1}: ${cur.q}`;
  renderOptions(cur);
}

function nextQuestion(){
  qIdx++;
  if(qIdx<levels[lvl].questions.length){
    showQuestion();
  } else {
    lvl++;
    qIdx=0;
    if(lvl<levels.length){
      feedback.style.color='#000';
      feedback.innerHTML=`🎉 Completed level ${levels[lvl-1].name}!`;
      showQuestion();
    } else {
      feedback.style.color='#000';
      feedback.innerHTML='🏁 Quiz finished!';
      submitBtn.disabled=true;
      clearInterval(timerInt);
    }
  }
}

submitBtn.onclick=()=>{
  if(!selected)return;
  const curr=levels[lvl].questions[qIdx];
  if(selected===curr.a){
    feedback.style.color='#080';
    feedback.textContent='✅ Correct!';
    score++;
    bulbs++;
    updateDisplay();
    nextQuestion();
  } else {
    feedback.style.color='#d00';
    feedback.textContent='❌ Wrong – try again';
  }
};

function endQuiz(){
  feedback.innerHTML+='<br>⏳ Time’s up! Quiz ended.';
  submitBtn.disabled=true;
}

updateDisplay();
</script>
</body>
</html>

